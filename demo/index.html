<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <style>
        html,body,#viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="viewDiv"></div>
</body>

<script src="./init.js"></script>
<script src="./drawPoint.js"></script>

<script>
    (async ()=>{
        
        // create map
        const InitIns = new Init.Init()
        const {view,map} = await InitIns.create2D({
            basemap:'topo'
        },{
            container:"viewDiv",
            extent:{
                xmax: "13475726.80897781",
                xmin: "13456254.47602219",
                ymax: "2858002.702937889",
                ymin: "2840097.3290621107",
                spatialReference:{
                    wkid: 3857
                },
            },
            spatialReference:{
                wkid: 3857
            }
        });

        // test drawPoint
        
        
        
        const buttonWrapper = document.createElement('div')
        buttonWrapper.style.cssText = `position:absolute;top:0;left:0;z-index:9999;`
        document.body.append(buttonWrapper)
        
        const measure = document.createElement('button')
        const search = document.createElement('button')
        const destroy = document.createElement('button')

        measure.innerText = "measure"
        search.innerText = "search"
        destroy.innerText = "destroy"
        buttonWrapper.append(measure)
        buttonWrapper.append(search)
        buttonWrapper.append(destroy)

        measure.onclick = async ()=>await DrawPoint.measure(view,map)
        search.onclick = async ()=>await DrawPoint.search(view,map)
        destroy.onclick = ()=>DrawPoint.destroy()

    })();
</script>

</html>